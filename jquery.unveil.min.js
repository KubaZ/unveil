!function(a){a.fn.unveil=function(b,c){function d(){var b=j.filter(function(){var b=a(this);if(!b.is(":hidden")){var c=f.scrollTop(),d=c+f.height(),e=b.offset().top,h=e+b.height();return h>=c-g&&d+g>=e}});e=b.trigger("unveil"),j=j.not(e)}var e,f=a(window),g=b||0,h=window.devicePixelRatio>1,i=h?"data-src-retina":"data-src",j=this;return this.one("unveil",function(){var b,d,e=this.getAttribute(i);e=e||this.getAttribute("data-src"),e&&(d=a(this),d.addClass("loading"),b=new Image,b.onload=function(){d.css("backgroundImage",'url("'+e+'")'),d.removeClass("loading")},b.src=e,b=null,"function"==typeof c&&c.call(this))}),f.scroll(d),f.resize(d),d(),this}}(window.jQuery||window.Zepto);